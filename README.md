# 项目README
## 项目简介
___
> 通过微信个人号接口和人工智能的API（应用程序接口）搭建微信聊天机器人，实现微信消息自动回复功能。

* 本项目的微信接口框架基于**itchat**框架，该框架可以通过扫描二维码在后台**模拟登录PC端微信**。
* 用户的PC端微信会被**占用**，在程序运行时不能同时登陆PC端微信。
* 登陆成功后，itchat框架会**持续监听**微信的新消息。捕获到符合条件的新消息后，就会传递给AI进行处理，并对该用户进行回复。

## 项目说明
___
> 本项目不提供AI接口的秘钥，需要用户自己注册**火山引擎**账号并获取秘钥，并安全的配置在自己系统的环境变量中，平台提供了多种模型的免费额度供用户选择。
* 国产AI的接入点可以在程序中的配置文件中通过**推理接入点**灵活更换，本项目推荐使用国产大模型接口而不是OpenAI的模型，有如下优势：
  * 配置容易
  * 响应快速
  * 成本低廉
  * 足以胜任聊天任务

## 使用说明
* 程序启动后由于监听功能的实现导致线程被阻塞，程序没有合适的出口，设计中在控制台（console)键入【exit+回车】即可安全关闭程序，并对还未结束的会话发送程序关闭提示。
* 为了防止对于会话的回复不受控，本项目将开头加"/"的消息认为是需要接收的消息，而机器人的启动和结束命令可以自定义。
* **当前版本只能实现文字的收发功能**

## 项目结构
___
```
/itchat
├── /config                 # 配置相关
│   └── config.py           # 配置信息集中管理
├── /logs                   # 日志相关
│   └── logger.py           # 日志系统初始化与管理
├── /exceptions             # 异常处理相关
│   └── exception.py        # 全局异常处理模块
├── /session                # 会话管理相关
│   └── session.py          # 会话的启动、管理与队列处理
├── /model                  # AI 模型相关
│   └── doubao.py           # AI 模型调用封装
├── /login                  # 登录与用户初始化
│   └── logininit.py        # 登录与初始化用户信息
├── main.py                 # 项目的入口文件
└── README.md               # 项目说明文件
# 此外还有一些程序运行时生成的文件
```

## 功能展示
___
- **自动应答**：通过微信机器人与用户进行自然对话，机器人可以以初始化提示词开启，便于自定义机器人的角色。
- **会话管理**：支持多用户会话的并行处理，每个用户都有独立的会话上下文，不同会话间不会产生冲突。
- **自定义命令**：支持启动和结束会话的自定义命令，增强交互性。

## 安装与运行
___
### 环境依赖
- Python 3.7 及以上
- 依赖库：
    - `pandas`
    - `itchat`
  - `volcenginesdkarkruntime` （用于 AI 模型调用）

可以通过以下命令安装依赖：
* 建议先配置清华镜像源，以免下载超时：
```sh
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```
* 安装requirements：
```sh
pip install -r requirements.txt
```
* 安装**volcenginesdkarkruntime**(没成功的话)：
```sh
pip install volcengine-python-sdk
```

* 某些依赖安装上可能会出现问题:
* itchat的最新版本通过pip命令无法获取，已在项目中为大家提供了压缩包，直接**复制-粘贴**到环境依赖的**site-package**中即可(此处需要一定的环境配置知识)。

### 运行步骤
1. 克隆项目代码：
   ```sh
   git clone <repository_url>
   cd project_root
   ```

2. 启动项目(优先初始化配置config.py保证项目能正常运行)：
   ```sh
   python main.py
   ```

3. 按照终端提示进行微信登录。

## 注意事项
- **数据隐私**：请注意用户数据的隐私保护，合理使用机器人。
- **微信限制**：使用 `itchat` 可能会受到微信官方的限制，请避免频繁操作以防止账号被封禁（正常情况下不会）。

## 贡献
欢迎对项目提出改进建议或提交 Pull Request，如果有任何问题，请与项目维护者联系。

## 许可证
该项目遵循 MIT 许可证。